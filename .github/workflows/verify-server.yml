name: Verify Server Connection

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  verify:
    runs-on: self-hosted

    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Check Server Environment
        run: |
          echo "Confirming runner is active on the server..."
          echo "Hostname: $env:COMPUTERNAME"
          echo "User: $env:USERNAME"
          echo "Current Path: $(Get-Location)"
          echo "Server Time: $(Get-Date)"
        shell: pwsh

      - name: Verify Web Directory
        run: |
          if (Test-Path "web.config") {
            echo "Success: web.config found in this directory."
          } else {
            echo "Warning: web.config not found. Are we in the correct project root?"
          }
        shell: pwsh
